<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Cory Boris</title>
  <link rel="preload" href="assets/main_logo.png" as="image" fetchpriority="high">
  <link rel="preload" href="assets/CorySignatureMain.gif" as="image">
  <script>
    // Detect touch BEFORE loading CSS - prevents race condition on iPad Pro
    var isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
    document.write('<link rel="stylesheet" href="' + (isTouchDevice ? 'mobile.css' : 'desktop.css') + '" id="main-stylesheet">');
  </script>
  <style id="critical-splash-styles">
    /* Critical inline CSS - loads immediately before external stylesheets */
    /* Splash overlay - covers entire viewport */
    .splash-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100vw;
      height: 100vh;
      /* Match section 1 gradient */
      background: linear-gradient(135deg, #2d4a6f 0%, #3a6186 50%, #4b79a1 100%);
      z-index: 99999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      pointer-events: all;
    }
    /* When hiding, fade the ENTIRE wrapper as ONE unit - forces atomic compositing */
    .splash-overlay.splash-hide .splash-shimmer-wrapper {
      opacity: 0;
    }
    .splash-overlay.splash-hide .splash-logo-container::before,
    .splash-overlay.splash-hide .splash-logo-container::after {
      display: none;
    }
    .splash-overlay.splash-hide {
      pointer-events: none;
    }
    .splash-shimmer-wrapper {
      transition: opacity 0.5s ease-out;
      will-change: opacity;
    }
    /* Site completely hidden until splash is done */
    #app {
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.5s ease-out, visibility 0s 0.5s;
    }
    #app.site-visible {
      visibility: visible;
      opacity: 1;
      transition: opacity 0.5s ease-out, visibility 0s 0s;
    }
    /* Diagonal slat overlay - hidden initially, appears during reveal */
    .slat-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 99998;
      pointer-events: none;
      background: repeating-linear-gradient(
        -55deg,
        #3a6186 0px,
        #3a6186 12px,
        transparent 12px,
        transparent 24px
      );
      transform: translateX(-100%);
      opacity: 0;
      transition: transform 0.5s ease-in-out, opacity 0s;
    }
    .slat-overlay.reveal {
      opacity: 1;
      transform: translateX(100%);
    }
    /* Prevent scroll while splash is active */
    body.splash-active {
      overflow: hidden !important;
      height: 100vh !important;
      /* Same gradient as splash - stays visible throughout transition */
      background: linear-gradient(135deg, #2d4a6f 0%, #3a6186 50%, #4b79a1 100%);
    }
    /* Splash content wrapper */
    .splash-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 20px;
    }
    /* Logo - circle cropped, initially hidden for fade-in */
    .splash-logo {
      width: 400px;
      height: 400px;
      border-radius: 50%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.5s ease-out;
    }
    .splash-logo.is-visible {
      opacity: 1;
    }
    /* Signature gif - uses SVG filter for thickening and color */
    /* Hidden completely until loaded - prevents broken image placeholder */
    .splash-signature {
      width: 340px;
      height: 100px;
      max-width: 85vw;
      object-fit: contain;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.4s ease-out;
      filter: url(#signature-thickener);
      will-change: opacity;
    }
    .splash-signature.is-visible {
      visibility: visible;
      opacity: 1;
    }
    /* Content wrapper - holds everything that fades together */
    .splash-shimmer-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      position: relative;
    }
    /* Logo container - overflow:hidden for shimmer clipping, box-shadow for circular shadow */
    .splash-logo-container {
      position: relative;
      width: 400px;
      height: 400px;
      border-radius: 50%;
      overflow: hidden;
      box-shadow:
        0 8px 16px rgba(0, 0, 0, 0.3),
        0 16px 32px rgba(0, 0, 0, 0.25),
        0 4px 8px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transition: opacity 0.6s ease-out;
    }
    /* Fade container in with logo (is-ready), fade out on hide */
    .splash-logo-container.is-ready {
      opacity: 1;
    }
    .splash-overlay.splash-hide .splash-logo-container {
      opacity: 0;
    }
    /* All visual styling on the image itself */
    .splash-logo-container .splash-logo {
      width: 100%;
      height: 100%;
      border-radius: 50%;
    }
    /* Shimmer effect - wavy dual-layer sweep */
    .splash-logo-container.is-shimmering::before,
    .splash-logo-container.is-shimmering::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 80%;
      height: 200%;
      pointer-events: none;
    }
    /* Primary shimmer - subtle wavy highlight */
    .splash-logo-container.is-shimmering::after {
      background:
        linear-gradient(
          90deg,
          transparent 0%,
          transparent 38%,
          rgba(255, 255, 255, 0.04) 43%,
          rgba(255, 255, 255, 0.12) 48%,
          rgba(255, 255, 255, 0.15) 50%,
          rgba(255, 255, 255, 0.12) 52%,
          rgba(255, 255, 255, 0.04) 57%,
          transparent 62%,
          transparent 100%
        );
      filter: blur(2px);
      transform-origin: center center;
      animation: shimmer-wave 2.2s ease-in-out infinite;
    }
    /* Secondary shimmer - soft glow */
    .splash-logo-container.is-shimmering::before {
      background:
        linear-gradient(
          90deg,
          transparent 0%,
          transparent 30%,
          rgba(255, 255, 255, 0.02) 40%,
          rgba(255, 255, 255, 0.06) 50%,
          rgba(255, 255, 255, 0.02) 60%,
          transparent 70%,
          transparent 100%
        );
      filter: blur(10px);
      transform-origin: center center;
      animation: shimmer-wave-soft 2.2s ease-in-out infinite;
    }
    @keyframes shimmer-wave {
      0% {
        transform: translateX(-160%) rotate(-6deg);
      }
      100% {
        transform: translateX(160%) rotate(-6deg);
      }
    }
    @keyframes shimmer-wave-soft {
      0% {
        transform: translateX(-170%) rotate(-8deg);
      }
      100% {
        transform: translateX(150%) rotate(-8deg);
      }
    }
    /* Mobile adjustments */
    @media (max-width: 768px) {
      .splash-logo-container {
        width: 300px;
        height: 300px;
      }
      .splash-logo {
        width: 300px;
        height: 300px;
      }
      .splash-signature {
        width: 280px;
        height: 85px;
        filter: url(#signature-thickener);
      }
    }
  </style>
  <script src="common.js"></script>
</head>
<body class="splash-active">
  <!-- SVG Filter for Signature Thickening -->
  <svg style="position: absolute; width: 0; height: 0; overflow: hidden;" aria-hidden="true">
    <defs>
      <filter id="signature-thickener" color-interpolation-filters="sRGB">
        <!-- 1. Invert black to white -->
        <feColorMatrix type="matrix" values="-1 0 0 0 1
                                           -1 0 0 0 1
                                           -1 0 0 0 1
                                            0 0 0 1 0"/>

        <!-- 2. Thicken strokes using dilation (makes white parts wider) -->
        <feMorphology operator="dilate" radius="1.5" result="thickened"/>

        <!-- 3. Tint to eggshell white (#f5f5dc) -->
        <feColorMatrix in="thickened" type="matrix" values="0.96 0 0 0 0
                                                          0 0.96 0 0 0
                                                          0 0 0.86 0 0
                                                          0 0 0 1 0" result="eggshell"/>

        <!-- 4. Create grey outline shadow -->
        <feDropShadow dx="0" dy="0" stdDeviation="1" flood-color="rgba(60, 60, 60, 0.8)" result="shadow"/>

        <!-- 5. Composite shadow behind eggshell signature -->
        <feMerge>
          <feMergeNode in="shadow"/>
          <feMergeNode in="eggshell"/>
        </feMerge>
      </filter>
    </defs>
  </svg>

  <!-- Splash Screen -->
  <div class="splash-overlay" id="splash-overlay">
    <div class="splash-shimmer-wrapper">
      <div class="splash-logo-container" id="splash-logo-container">
        <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="Cory Boris" class="splash-logo" id="splash-logo" data-src="assets/main_logo.png" />
      </div>
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" class="splash-signature" id="splash-signature" data-src="assets/CorySignatureMain.gif" />
    </div>
  </div>

  <!-- Diagonal slat reveal overlay -->
  <div class="slat-overlay" id="slat-overlay"></div>

  <div id="app"></div>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script src="splash.js"></script>
  <script>
    // Load the appropriate app based on device type
    document.addEventListener('DOMContentLoaded', function() {
      CoryPortfolio.initApp();
    });
  </script>
</body>
</html>
